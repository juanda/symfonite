var Expand=function(a){var b=a.text;for(var c in a.substs)b=b.replace(new RegExp(c,"g"),a.substs[c]);return b};
eval(Expand({text:'var _19=_01(){_01 d(c){if(!(_00 _1b d)){var e=new j;d.apply(e,_08);_02 e}_00._07=0;if(_08._07==1&&(c _1b Array||c _1b d))for(e=0;e<c._07;e++){_00[e]=c[e];_00._07++}else for(e=0;e<_08._07;e++){_00[e]=_08[e];_00._07++}}_01 m(){for(var c=a(_08[0]._07,0),e=0;e<_08[0]._07;e++)for(var g=0;g<_08._07;g++)c[e]+=_08[g][e];_02 d(c)}_01 k(c,e){_02 m(c,h(e))}_01 n(c,e){for(var g=\n[],i=0;i<c._07;i++)g[i]=e*c[i];_02 d(g)}_01 h(c){_02 n(c,-1)}_01 a(c,e){for(var g=[],i=0;i<c;i++)g[i]=e;_02 d(g)}_01 b(c,e){if(c._07!=e._07)_02 false;for(var g=0;g<c._07;g++)if(c[g]!==e[g])_02 false;_02 true}_01 f(c){for(var e=[],g=0;g<c._07;g++)e[g]=c[g];_02 d(e)}_01 j(){}d._03.add=_01(){_02 m.apply(null,Array._03.slice.call(_08).concat([_00]))};d._03.subtract=_01(c){_02 k(_00,c)};d._03.scale=\n_01(c){_02 n(_00,c)};d._03.negate=_01(){_02 h(_00)};d._03.equals=_01(c){if(!(c _1b d))_02 false;_02 b(_00,c)};d._03.clone=_01(){_02 f(_00)};d._03.toArray=_01(){for(var c=[],e=0;e<_00._07;e++)c[e]=_00[e];_02 c};d._03.toString=_01(c){c=c||3;for(var e="",g=0;g<_00._07;g++)e+=(g>0?", ":"")+_00[g].toPrecision(c);_02"_19 ("+e+")"};j._03=d._03;d.add=m;d.subtract=k;d.scale=n;d.negate=h;d.fill=\na;d.equals=b;d.clone=f;_02 d}();var Pong=_01(){_01 d(a,b,f){_00.players=[new k(_00,0,a[0].name,a[0]._14),new k(_00,1,a[1].name,a[1]._14)];a=f||{};f=n.defaults;var j={};for(var c in f)j[c]=typeof a[c]!="undefined"?a[c]:f[c];_00._04=j;_00._09=h._1a;_00._11();_00._06={node:b};_00.createGraphics()}_01 m(){var a=_00;if(!(_00._09==h._1a||_00._09==h.over)){for(var b=0;b<2;b++)_00.players[b].updatePaddle();if(_00._09!=h.wait){b=_00.ball;b.pos=b.pos.add(b.vel.scale(1/\n_00._04._16));if(_00._09!=h._17){if(_05.abs(b.pos[0])+_00._04._12>=1&&_05._0f(b.pos[0],true)==_05._0f(b.vel[0],true)){var f=b.pos[0]<0?0:1,j=_00.players[f];if(_05.abs(j._0d.pos-b.pos[1])<_00._04._0dWidth/2){f=_05.min(_05.abs(j._0d.vel)*_00._04._0dSpeedInfluenceCoeff,1);b.vel[0]*=-1;b.vel[1]=(1-f)*b.vel[1]+f*_00._04.maxSpeed*-_05._0f(j._0d.vel)}else{_00._09=h._17;_00.players[Number(!f)]._17++;_00._0b=setTimeout(_01(){a._09=\nh.wait;a._11();if(_05.max(a.players[0]._17,a.players[1]._17)<a._04._17Limit)a._0b=setTimeout(_01(){a._09=h.play},a._04.playWait);else{a._09=h.over;a.stopLoop();a._0a()}},_00._04._17Wait)}}if(_05.abs(b.pos[1])+_00._04._12>=0.5&&_05._0f(b.pos[1],true)==_05._0f(b.vel[1],true))b.vel[1]*=-1}}}_00._0a()}_01 k(a,b,f,j){_00.game=a;_00.index=b;_00.name=f;_00._14=j;_00._17=0;_00._1e()}var n={defaults:{_17Limit:10,\n_16:30,playWait:750,_17Wait:500,_1c:_19(1.2,0.8),maxSpeed:1.2,_0dSpeedInfluenceCoeff:0.5,_0dWidth:0.2,_12:0.025,_06Scale:300}};d._03.start=_01(){var a=_00;if(!(_00._09!=h._1a&&_00._09!=h.over)){_00._1f();_00._11();_00._09=h.wait;_00.runLoop();_00._0b=setTimeout(_01(){a._09=h.play},_00._04.playWait)}};d._03.stop=_01(){if(_00._09!=h._1a){if(_00._0b){clearTimeout(_00._0b);\n_00._0b=null}_00._09=h._1a;_00.stopLoop();_00._1f();_00._11();_00._0a()}};d._03._11=_01(){_00.ball={pos:_19(0,0),vel:_19(_00._04._1c[0]*(_05.round(_05.random())?-1:1),_00._04._1c[1]*(_05.round(_05.random())?-1:1))};for(var a=0;a<2;a++)_00.players[a]._1e()};d._03._1f=_01(){for(var a=0;a<2;a++)_00.players[a]._17=0};d._03.runLoop=_01(){var a=_00;if(!_00._0e)_00._0e=\nsetInterval(_01(){m.call(a)},_05.round(1E3/_00._04._16))};d._03.stopLoop=_01(){if(_00._0e){clearInterval(_00._0e);_00._0e=null}};d._03._0a=_01(){var a=_00._04._06Scale,b=2*_00._04._12*a;$(_00._06.ball).css({left:((_00.ball.pos[0]+1)*a-b/2).toFixed(2)+"px",top:((_00.ball.pos[1]+0.5)*a-b/2).toFixed(2)+"px"});for(b=0;b<2;b++)$(_00._06._0ds[b]).css({top:((_00.players[b]._0d.pos+0.5-\n_00._04._0dWidth/2)*a).toFixed(2)+"px"});for(b=0;b<2;b++)$(_00._06._17Labels[b]).text(_00.players[b]._17);for(b=0;b<2;b++)$(_00._06.nameLabels[b]).text(_00.players[b].name);a="";switch(_00._09){case h.wait:a="READY";break;case h.over:a="GAME OVER";break}$(_00._06._1d).text(a)};d._03.createGraphics=_01(){var a=$(_00._06.node),b=_00._04._06Scale;a._0c("board").css({width:2*b+"px",height:b+"px"});$("<div />")._0c("divider").css({height:b+\n"px",left:b+"px",top:0})._15(a);var f=2*_00._04._12*b;_00._06.ball=$("<div />")._0c("ball").css({width:f+"px",height:f+"px"})._15(a).get(0);_00._06._0ds=[];for(f=0;f<2;f++)_00._06._0ds[f]=$("<div />")._0c("_0d").css({height:_00._04._0dWidth*b+"px",left:2*f*b+"px"})._15(a).get(0);_00._06._17Labels=[];for(f=0;f<2;f++)_00._06._17Labels[f]=$("<div />")._0c("_17Label").css({width:b+"px",left:f*b+"px"})._15(a).get(0);\n_00._06.nameLabels=[];for(f=0;f<2;f++)_00._06.nameLabels[f]=$("<div />")._0c("nameLabel")._0c(f?"right":"left").css({width:b+"px",left:f*b+"px"})._15(a).get(0);_00._06._1d=$("<div />")._0c("_1d").css({width:2*b+"px"})._15(a).get(0);_00._0a()};var h={_1a:0,wait:1,play:2,_17:3,over:4};d.GameState=h;k._03.updatePaddle=_01(){var a=_00._0d.pos,b=_00._14.call(null,_00.index,_00.game.ball);_00._0d.pos=\n_05.min(_05.max(b,-0.5),0.5);_00._0d.vel=(_00._0d.pos-a)*_00.game._04._16};k._03._1e=_01(){_00._0d={pos:0,vel:0}};_02{Game:d,Constants:n}}();(_01(){_05._0f=_01(d,m){if(d<0)_02-1;if(d>0)_02 1;_02 m===true?NaN:0}})();$(_01(){var d=_01(){var a=(new Date).getTime();_02 _01(){_02(new Date).getTime()-a}}(),m=_01(){var a=_19(0,0),b=0;$(document).mousemove(_01(f){if(!(d()-b<10)){a=_19(f.pageX,f.pageY);b=d()}});_02 _01(){_02 a}}(),k=document.getElementById("board"),n=[{name:"AI \\u201clucky\\u201d",_14:_01(){var a=1E3+_05.random()*250,b=_05.random()*a;_02 _01(f,j){_02 j.pos[1]+_05.sin((d()+b)*2*_05.PI/a)/11}}()},{name:"You",_14:_01(a,b,\nf,j,c){_01 e(){g+=i/j;var l=q-g,o=_05.pow(i,2)/(2*b);o=(_05.abs(l)-o)/o;var r=_05._0f(l)*b/j;if(_05.abs(l)<t){if(_05.abs(i)>0){l=i-_05._0f(i)*b/j;i=_05._0f(l)==_05._0f(i)?l:0}}else if(o>s&&(_05.abs(i)<f||_05._0f(i)!=_05._0f(l)))i+=r;else if(o<=s&&_05._0f(i)==_05._0f(l))i+=-r}var g=0,i=0,q=0,t=1*b/j/j,s=1.5,p=null;if(c)p=setInterval(e,_05.round(1E3/j));_08.callee.stopTimer=_01(){p&&clearInterval(p)};_02 _01(l,o){q=a(l,o);c||e();_02 g}}(_01(){_02(m()[1]-\n$(k).offset().top)/h._04._06Scale-0.5},10,5,30,false)}],h=new Pong.Game(n,k,{_16:30});$("#startButton").click(_01(a){h.start();a.preventDefault()});$("#stopButton").click(_01(a){h.stop();a.preventDefault()})});\r\n',substs:{_00:'this',_01:'function',_02:'return',_03:'prototype',_04:'options',_05:'Math',_06:'graphics',_07:'length',_08:'arguments',_09:'state',_0a:'updateGraphics',_0b:'gameTimeout',_0c:'addClass',_0d:'paddle',_0e:'loopInterval',_0f:'sign',_10:'graphicsScale',_11:'resetBoard',_12:'ballRadius',_13:'paddleSpeedInfluenceCoeff',_14:'callback',_15:'appendTo',_16:'frameRate',_17:'score',_18:'paddleWidth',_19:'Vector',_1a:'pregame',_1b:'instanceof',_1c:'initialSpeed',_1d:'messageLabel',_1e:'resetPaddle',_1f:'resetScores'}}));



